language: go


env:
  - DEP_VERSION=0.5.0

services:
  - docker

# before_install:
#   - curl https://raw.githubusercontent.com/golang/dep/master/install.sh | sh  

go:
  - 1.12.x

script:
- pwd
- echo $GOPATH
- echo $TRAVIS_BRANCH
- GOOS=linux GOARCH=arm GOARM=7 CGO_ENABLED=0 go build -o spider ./src
- docker build -f Dockerfile -t amanohikaru/spider .
- docker login -u $DOCKER_USER -p $DOCKER_PASS
- docker push amanohikaru/spider
# - curl -X POST http://util.online:9000/api/webhooks/d24ebc41-4952-4d21-bae2-9eb124339b7a
#- curl -X POST http://util.online:9001/api/webhooks/0a310caa-3005-4813-8be2-f57274273f5c
